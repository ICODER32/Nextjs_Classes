# Guide to Next.js with Redux Toolkit

## 1. Introduction to Redux Toolkit

Redux Toolkit simplifies Redux development by reducing boilerplate code and offering helpful tools for creating and managing state.

### Key Features of Redux Toolkit:

- **`configureStore`**: A simplified way to set up the Redux store.
- **`createSlice`**: A function for defining reducers and actions in one go.
- **Built-in support**: For managing asynchronous actions using `createAsyncThunk`.

---

## 2. Setting Up Redux Toolkit in Next.js

### Step 1: Create a Next.js App

If you haven't already created a Next.js app, you can do so by running the following command:

```bash
npx create-next-app my-next-app
cd my-next-app
```

### Step 2: Install Redux Toolkit and React-Redux

Run the following command to install **Redux Toolkit** and **React-Redux**:

```bash
npm install @reduxjs/toolkit react-redux
```

---

## 3. Setting Up Redux Store with Redux Toolkit

### Step 3: Create Redux Store

Inside the `app` directory (or `src` if you're using a custom structure), create a new folder called `redux`. Inside it, create a file named `store.js` to set up the Redux store:

```javascript
// src/store/store.ts
import { configureStore } from "@reduxjs/toolkit";
import counterReducer from "./counterSlice";

export const store = configureStore({
  reducer: {
    counter: counterReducer,
  },
});
```

- Here, we are configuring a store with a `counter` reducer, which will be created next.

### Step 4: Create a Slice for Counter

In the same `redux` folder, create a file `counterSlice.js` to define actions and the reducer using `createSlice`:

```javascript
// src/store/counterSlice.ts
import { createSlice } from "@reduxjs/toolkit";

export const counterSlice = createSlice({
  name: "counter",
  initialState: {
    value: 0,
  },
  reducers: {
    increment: (state) => {
      state.value += 1;
    },
    decrement: (state) => {
      state.value -= 1;
    },
    incrementByAmount: (state, action) => {
      state.value += action.payload;
    },
  },
});

export const { increment, decrement, incrementByAmount } = counterSlice.actions;

export default counterSlice.reducer;
```

- `createSlice` automatically generates action creators like `increment`, `decrement`, and `incrementByAmount`.
- `initialState` defines the starting state of the counter.

---

## 4. Integrating Redux with Next.js

### Step 5: Provide Redux Store to Next.js App

Wrap your Next.js app with the Redux `Provider` to connect the store to your app. Open `_app.js` and update it:

```javascript
// app/provider.tsx
import { Provider } from "react-redux";
import { store } from "./redux/store";
import "../styles/globals.css";

function Provider({ children }) {
  return <Provider store={store}>{children}</Provider>;
}

export default Provider;
```

Update the 'layout.tsx' file to use the `Provider` component:

````javascript
// app/layout.tsx
import type { Metadata } from "next";
import localFont from "next/font/local";
import "./globals.css";
import { StoreProvider } from "./StoreProvider";

const geistSans = localFont({
  src: "./fonts/GeistVF.woff",
  variable: "--font-geist-sans",
  weight: "100 900",
});
const geistMono = localFont({
  src: "./fonts/GeistMonoVF.woff",
  variable: "--font-geist-mono",
  weight: "100 900",
});

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
      >
        <StoreProvider>{children}</StoreProvider>
      </body>
    </html>
  );
}

```

Now, the entire Next.js application has access to the Redux store.

---

## 5. Using Redux in a Component

### Step 6: Create a Component to Use Redux State and Dispatch Actions

Inside the `pages` folder, create a file `index.js` for the home page. Here we will use the `useSelector` and `useDispatch` hooks to interact with the Redux store:

```javascript
// app/page.ts
"use client";

import { useDispatch, useSelector } from "react-redux";
import { increment, decrement, incrementByAmount } from "./redux/counterSlice";

export default function Home() {
  const count = useSelector((state) => state.counter.value);
  const dispatch = useDispatch();

  return (
    <div>
      <h1>Counter: {count}</h1>
      <button onClick={() => dispatch(increment())}>Increment</button>
      <button onClick={() => dispatch(decrement())}>Decrement</button>
      <button onClick={() => dispatch(incrementByAmount(5))}>
        Increment by 5
      </button>
    </div>
  );
}
````

- **`useSelector`**: Allows components to extract data from the Redux store.
- **`useDispatch`**: Dispatches actions to update the Redux state.

---

## 6. Advantages of Redux Toolkit

- **Simplified setup**: Less boilerplate code compared to traditional Redux.
- **Immutable updates**: Built-in support for immutability with `createSlice`.
- **Easy async handling**: Tools like `createAsyncThunk` make handling asynchronous actions simple.

---

## 7. Reference Documentation

For more details and examples, refer to the official Redux Toolkit documentation:  
[Redux Toolkit Documentation](https://redux.js.org/introduction/getting-started)
